package main

import (
	"fmt"

	"github.com/powerchordinc/finance/internal/util/email"
	l "github.com/powerchordinc/finance/internal/v1/login"
	"gopkg.in/guregu/null.v3"
)

// this will populate the admin user
// and populate the reset pwd process

func main() {
	login := &l.Login{EmailAddr: null.StringFrom("admin@powerchordsystem.com"), SetPwd: null.BoolFrom(true)}
	eh := email.Email{}
	dh := l.InitStorage()
	mh := l.NewManagerLogin(dh, eh)
	if err := mh.Post(login); err != nil {
		fmt.Println("Creating admin error:", err)
		return
	}
	reset := l.ResetRequest{EmailAddr: login.EmailAddr.String}
	if err := mh.ResetRequest(&reset); err != nil {
		fmt.Println("Creating admin reset error:", err)
		return
	}
	fmt.Println("reset token: ", reset.ResetToken)
}
